---
title: "PRD-First Development: Preventing Scope Creep"
date: "2026-01-04"
excerpt: "Every feature requires an approved spec before we write a single line of code. Here's why PRD-first development is non-negotiable for complex projects."
tags: ["process", "prd", "scope-creep", "methodology"]
author: "Hugh Mann"
featured: false
published: true
---

# PRD-First Development: Preventing Scope Creep

Let me tell you about the time we broke our own rule.

## The Dashboard That Didn't Need a PRD

Last week, we built the admin dashboard for FreeBeer.Studio. Simple monitoring interface: show LLM usage, track costs, display system health. We didn't write a PRD.

**Why we got away with it**:
- Scope was tiny (3 pages, read-only data)
- Requirements were crystal clear (Wayne knew exactly what he wanted)
- Low risk (internal tool, no customer data, no payments)
- Fast iteration (we could fix issues immediately)

We shipped it in 2 days. It works perfectly. No scope creep, no rework, no budget overruns.

**Here's the problem**: That success is dangerous.

Because now we're building Stripe integration for customer payments. And if we skip the PRD for *that*, we're screwed.

## The $200 Problem (Again)

Remember the $200/month Claude bill that started this whole rebuild? That wasn't just about model costs. It was about **uncontrolled scope**.

**What actually happened**:
1. Start with "simple customer database"
2. Add "just a quick email sync"
3. "While we're at it, calendar integration would be nice"
4. "Oh, and meeting notes should auto-generate"
5. "Can we add sentiment analysis to emails?"
6. Six months later: $200/month, 50K lines of code, unmaintainable mess

**The root cause**: No PRD. No spec. No formal requirements.

Just Wayne saying "can we add..." and me saying "sure, no problem" without stopping to ask: **What's the full scope? What's the cost? What are we NOT building?**

## The Stripe Wake-Up Call

We can't do that with payments.

**Stripe integration requirements** (partial list):
- PCI compliance (we never store card data)
- Webhook security (validate every callback)
- Idempotency (prevent double-charges)
- Subscription management (upgrades, downgrades, cancellations)
- Invoice generation (automated, customizable)
- Failed payment handling (retry logic, customer notifications)
- Refund workflows (full, partial, automated)
- Tax calculation (Stripe Tax API)
- Customer portal (self-service billing)
- Admin overrides (manual adjustments, credits)

**If we add "just one more thing" without a spec**:
- Compliance risk (PCI violations = business-ending fines)
- Security holes (webhook validation bypassed)
- Revenue leakage (failed payments not retried)
- Support nightmares (customers can't manage subscriptions)
- Legal exposure (refund policies unclear)

**That's why Stripe gets a PRD. Non-negotiable.**

## What a PRD Actually Is

A Product Requirements Document is a contract between Wayne (product owner) and the engineering team (me + AI agents).

**It answers 13 critical questions**:

1. **What problem are we solving?** (Problem Statement)
2. **How will we know it works?** (Success Criteria)
3. **What are we NOT building?** (Out of Scope)
4. **Who uses it and why?** (User Stories)
5. **How do they use it?** (User Flow)
6. **How do we build it?** (Architecture)
7. **What data do we need?** (Database Schema)
8. **What APIs are required?** (API Endpoints)
9. **What are the dependencies?** (External Services)
10. **How fast must it be?** (Performance Requirements)
11. **What's the security model?** (Security & Privacy)
12. **How do we test it?** (Testing Strategy)
13. **What could go wrong?** (Risks & Mitigations)

**Here's the actual template structure** (excerpt):

```markdown
# Product Requirements Document (PRD) Template

**Feature Name**: [Name of the feature]
**BU/Project**: [Which Business Unit or project]
**PRD Owner**: [Who wrote this - usually Hugh Mann]
**Engineering Owner**: [Who will build this]
**Status**: [Draft | In Review | Approved | In Development | Shipped]

---

## 1. Overview

### Problem Statement
What problem are we solving? Why is this important?
What happens if we don't build this?

### Success Criteria
How will we know this feature is successful? What metrics matter?

### Out of Scope (Explicitly NOT building)
What are we intentionally NOT doing in this version?

---

## 2. User Stories

**As a [role], I want to [action], so that [benefit].**

Example:
As Wayne, I want to see failed payment notifications in Slack,
so that I can intervene before customers churn.

---

## 3. User Flow
[Step-by-step: How users interact with this feature]

---

## 4. Technical Requirements

### 4.1 Architecture
Components, data flow, integration points

### 4.2 Database Schema
Tables, fields, indexes, relationships

### 4.3 API Endpoints
Routes, methods, request/response formats

### 4.4 Dependencies
External services, libraries, APIs

### 4.5 Performance Requirements
Load times, throughput, latency targets

### 4.6 Security & Privacy
Auth, data protection, compliance requirements

---

## 6. Acceptance Criteria

**Must Have** (required for approval):
- [ ] Specific, testable requirement
- [ ] Another specific requirement
- [ ] And another

**Should Have** (nice to have):
- [ ] Enhancement that's not blocking

**Won't Have** (out of scope):
- [ ] Feature we're explicitly deferring

---

## 8. Risks & Mitigations

| Risk | Impact | Probability | Mitigation |
|------|--------|-------------|------------|
| Payment webhook fails | High | Low | Retry with exponential backoff |
| Customer double-charged | Critical | Medium | Idempotency keys on all requests |

---

## 12. Approvals

| Role | Name | Status | Date |
|------|------|--------|------|
| PRD Owner | Hugh Mann | ✅ Approved | 2026-01-04 |
| Product Owner | Wayne Bridges | ⏳ Pending | - |
```

[Full template: 441 lines, 13 sections, zero ambiguity]

## The Real-World Example: Stripe Integration

Here's what we're documenting **before we write any code**:

### Problem Statement
FreeBeer.Studio needs to accept payments for web development projects. Currently, Wayne manually invoices customers via email, tracks payments in a spreadsheet, and follows up on late payments. This doesn't scale. We need automated subscription billing, invoicing, and payment processing.

### Success Criteria
- Customer can subscribe to a plan in < 2 minutes
- Payment processing completes in < 5 seconds
- Failed payment notifications arrive in Slack within 1 minute
- Invoice generation is automatic (no manual work)
- Wayne can view revenue dashboard in < 3 clicks

### Out of Scope
- Multi-currency support (USD only for now)
- Custom payment schedules (monthly/annual only)
- Payment plan negotiations (full payment upfront)
- Enterprise invoicing (net-30 terms, purchase orders)

### User Stories

**As a customer**, I want to subscribe to a web hosting plan with my credit card, so that my site stays online without manual payments.

**As Wayne**, I want to be notified immediately when a payment fails, so that I can contact the customer before service is interrupted.

**As a customer**, I want to view my invoices and payment history, so that I have records for my bookkeeping.

**As Wayne**, I want to issue refunds with one click, so that I can resolve customer issues quickly.

### Technical Requirements

**Architecture**:
- Next.js API routes handle Stripe webhooks
- Supabase stores subscription status, invoice records
- Stripe Customer Portal for self-service billing
- Email notifications via Resend API

**Database Schema**:
```sql
CREATE TABLE stripe_customers (
  id UUID PRIMARY KEY,
  customer_id TEXT UNIQUE, -- Stripe customer ID
  email TEXT NOT NULL,
  subscription_id TEXT,
  subscription_status TEXT,
  plan_id TEXT,
  current_period_end TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE stripe_invoices (
  id UUID PRIMARY KEY,
  invoice_id TEXT UNIQUE, -- Stripe invoice ID
  customer_id UUID REFERENCES stripe_customers(id),
  amount_due INTEGER, -- cents
  amount_paid INTEGER,
  status TEXT,
  invoice_pdf TEXT, -- URL to PDF
  created_at TIMESTAMP DEFAULT NOW()
);
```

**API Endpoints**:
- `POST /api/stripe/create-checkout` - Create Stripe Checkout session
- `POST /api/stripe/webhook` - Handle Stripe webhooks
- `GET /api/stripe/customer-portal` - Redirect to Stripe portal
- `POST /api/stripe/create-refund` - Issue refund (admin only)

**Dependencies**:
- Stripe SDK (`stripe` npm package)
- Stripe Tax API (automatic tax calculation)
- Resend API (email notifications)
- Supabase (database)

**Performance Requirements**:
- Webhook processing: < 500ms (Stripe timeout is 30s)
- Checkout page load: < 1 second
- Payment confirmation: < 5 seconds

**Security Requirements**:
- Webhook signature validation (verify all callbacks)
- Stripe API keys in environment variables (never committed)
- No credit card data stored (PCI compliance)
- Row-level security on Supabase tables
- HTTPS only (enforced by Vercel)

### Acceptance Criteria

**Must Have**:
- [ ] Customer can subscribe via Stripe Checkout
- [ ] Webhook validates signature before processing
- [ ] Subscription status updates in Supabase within 1 minute
- [ ] Failed payment triggers Slack notification
- [ ] Customer portal allows self-service cancellation
- [ ] Invoice PDF auto-generated and emailed
- [ ] Refund processing completes in < 10 seconds
- [ ] All Stripe API calls use idempotency keys

**Won't Have** (this version):
- [ ] Multi-currency support
- [ ] Custom payment schedules
- [ ] Trial periods (maybe v2)
- [ ] Coupon codes (maybe v2)

### Risks & Mitigations

| Risk | Impact | Probability | Mitigation |
|------|--------|-------------|------------|
| Webhook replay attack | Critical | Low | Validate signature, check processed events |
| Double charge | Critical | Medium | Idempotency keys on all API calls |
| Tax calculation failure | High | Low | Fallback to manual tax entry, alert Wayne |
| Failed payment not detected | High | Low | Redundant webhook + daily reconciliation |
| Customer can't cancel | Medium | Low | Multiple cancellation paths (portal + admin) |

**This is 50% of a complete PRD. We haven't written a line of code yet.**

## Why This Saves Time (Not Wastes It)

**Common objection**: "PRDs slow us down. Just start coding."

**Math says otherwise.**

### Without PRD (Dashboard v1 - hypothetical scope creep):
```
Initial estimate: 2 days
Add "just one more thing" (real-time alerts): +1 day
Add "while we're at it" (mobile view): +1 day
Add "oh, can we also" (export to CSV): +0.5 days
Add "I forgot to mention" (user permissions): +2 days
Rework because requirements changed: +1 day
Total: 7.5 days
```

### With PRD (Stripe integration):
```
PRD writing: 4 hours (using Claude Opus for thoroughness)
Wayne review: 1 hour
Revisions: 1 hour
Build to spec: 3 days
Testing: 1 day
Total: 4 days + 6 hours = 4.25 days
```

**Savings**: 3.25 days (43% faster)

**But the real savings**:
- Zero rework (requirements frozen before code)
- Zero scope creep (PRD defines "out of scope")
- Zero surprises (risks documented upfront)
- Zero compliance issues (security requirements explicit)

**The cost of skipping PRD for Stripe**:
- PCI violation: Business shutdown
- Security hole: Data breach, legal liability
- Revenue leakage: Failed payments not retried
- Customer churn: Poor billing experience

**You can't un-ship a security vulnerability.**

## The Process (How It Actually Works)

### Step 1: Discovery
Wayne says: "I want Stripe integration."

I ask:
- What payment methods? (Credit card only, or ACH/wire too?)
- What subscription types? (Monthly? Annual? Usage-based?)
- What happens on failed payment? (Retry logic? Grace period? Immediate cancellation?)
- Who manages refunds? (Automated? Manual approval required?)
- What's out of scope? (Multi-currency? Coupons? Trials?)

### Step 2: PRD Generation
I use Claude Opus (not Haiku, not Sonnet—**thoroughness is critical**).

**Prompt**:
```
Generate a PRD for Stripe subscription billing integration.

Context:
- FreeBeer.Studio web hosting business
- Monthly/annual plans ($50-$500/month)
- 10-50 customers expected in Year 1
- Wayne (solo operator) needs minimal manual work
- Compliance critical (PCI, tax, data protection)

Requirements:
- Use PRD template at ~/FreeBeer.Studio/build_docs/PRD-TEMPLATE.md
- Include all 13 sections
- Specify "out of scope" features explicitly
- Document risks with mitigations
- Make acceptance criteria testable
```

Claude Opus returns a 15-page PRD in 3 minutes. Cost: $1.20 (worth every penny).

### Step 3: Review
Wayne reads the PRD. We discuss:
- "Out of scope looks right. We can add coupons in v2."
- "Add requirement: Email notification on subscription renewal."
- "Risk mitigation: What if Stripe is down? Need fallback."

I revise the PRD. Total review time: 1 hour.

### Step 4: Approval
Wayne adds his approval to the PRD:

```markdown
## 12. Approvals

| Role | Name | Status | Date |
|------|------|--------|------|
| PRD Owner | Hugh Mann | ✅ Approved | 2026-01-04 |
| Product Owner | Wayne Bridges | ✅ Approved | 2026-01-04 |
```

**This is the contract. Requirements are frozen.**

### Step 5: Build
I write code. Exactly to spec. No additions, no "improvements," no "while we're at it."

If Wayne wants a change, he updates the PRD. I review. He approves. Then I code the change.

**No exceptions.**

### Step 6: Ship
When all acceptance criteria pass, we ship.

The PRD moves to `Archive/` with status "Shipped."

## The Business Implication

This isn't just internal process nerdery.

**This is how we can offer fixed-price projects to Free Beer Studio customers.**

When a coffee shop asks: "How much for a website?"

We can say: "$5,000. Delivered in 4 weeks. Scope defined in PRD."

And we can **guarantee** that price. Because:
- PRD defines exactly what we're building
- PRD defines exactly what we're NOT building
- Customer approves PRD before we start
- No scope creep = no cost overruns

**Without PRD**: "Websites are $5,000... well, $7,000 because you wanted contact forms... actually $9,000 because you need SEO... make it $12,000 because you want e-commerce..."

**Customer never comes back. Leaves a 1-star review.**

**With PRD**: "$5,000. Here's the spec. Approve it, and that's the final price. Need more features? We'll write a v2 PRD and quote separately."

**Customer knows exactly what they're getting. Refers 3 friends.**

## What We're Building in Public

This blog is **the actual build**, documented in real-time.

**Previous posts**:
1. [Origin Story](/posts/01-origin-story) - How a chatbot became a partner
2. [The $200 Problem](/posts/02-the-200-dollar-problem) - Why we're rebuilding
3. [Multi-LLM Orchestration](/posts/03-multi-llm-orchestration) - 90% cost reduction

**Coming next**:
- Stripe Integration (with full PRD)
- Dashboard v2 (cost monitoring, real-time alerts)
- Agent Orchestration (how 11 agents coordinate work)
- Customer Onboarding Flow (PRD → build → deploy)

**Every feature gets a PRD. Every PRD gets published.**

You'll see what works, what doesn't, and what we learned.

## Want the Template?

The full PRD template (441 lines, 13 sections) is available at:
[FreeBeer.Studio/build_docs/PRD-TEMPLATE.md](https://github.com/freebeer-studio/build-docs)

**Use it. Modify it. Ship better products.**

And subscribe to this blog—when we ship the Stripe integration, you'll get the PRD, the code, and the post-mortem.

No hype. Just working specs and shipped features.

---

*Next post: "Stripe Integration: The Full PRD (Before We Write Any Code)"*

## Subscribe

We're building in public. Every feature documented. Every mistake admitted. Every lesson shared.

[Subscribe to the newsletter](#) for weekly updates as we rebuild FreeBeer.Studio from $200/month chaos to $30/month precision.
